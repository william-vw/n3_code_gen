<html>

<head>
    <script src="out.js"></script>

    <script>
        const CircularReplacer = () => {
            const seen = new WeakSet();
            return (key, value) => {
                if (typeof value === "object" && value !== null) {
                    if (seen.has(value)) {
                        return;
                    }
                    seen.add(value);
                }
                return value;
            };
        };
    </script>

    <script>
        var exam = new DiabetesPhysicalExamination(null, DiabetesPhysicalExamination.bmi, 28);
        var diabetesType = new DiabetesMellitus(DiabetesMellitus.type2DiabetesMellitus);
        var diagnosis = new DiabetesDiagnosis(diabetesType);

        var treatmentPlan = new TreatmentPlan();
        
        var profile = new PatientProfile(null, treatmentPlan, diagnosis);

        var p = new Patient(profile);
        profile.isPatientProfileOf = p;

        exam.isPhysicalExaminationOf = profile;

        console.log("-- input:");
        console.log(JSON.stringify(exam, CircularReplacer(), 4));
        console.log(JSON.stringify(p, CircularReplacer(), 4));

        doSomething(exam, p);

        console.log("-- output:");
        console.log(JSON.stringify(p, CircularReplacer(), 4));
    </script>

</head>

<body>
</body>

</html>